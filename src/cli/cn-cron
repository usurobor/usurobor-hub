#!/bin/sh
# cn-cron - Run cn sync cycle with logging
# Installed by: curl installer or git clone
# Usage: */5 * * * * cn-cron /path/to/hub

set -e

HUB="${1:-$(pwd)}"
LOG="/var/log/cn-$(date +%Y%m%d).log"

cd "$HUB"

# Sync with peers (fetch inbound, send outbound)
cn sync >> "$LOG" 2>&1

# Process inbox → write input.md → wake agent
cn in >> "$LOG" 2>&1
